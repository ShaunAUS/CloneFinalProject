# FinalProject

# **Happve Project(2020/08/02 ~2020/08/30)**



**프로젝트 목적**

- 인간이 고기를 너무 많이 먹으면 여러 가지 악영향을 지구에 끼친다. 대표적으로 기후변화 문제를 들수 있다.
- 이를 해결 하기위해 육식을 조금은 줄이고 비건 식습관을 권장하도록 제안
- 국내에 있는 비건 음식점 데이터 를 Open Api를 이용하여 검색/ 정보를 얻는 사이트 제작



**개발환경**

Backend

- JAVA
- SpringBoot
- Spring Data JPA
- Spring Security
- AWS-RDS
- ThymeLeafe

Frontend

- HTML
- CSS
- JavaScript

Tools

- Slack/Notion
- Inteli IDEA
- Navicat
- Adobe XD
- VScode

### **사용된 skills**

👨‍👨‍👧‍👧회원가입

- Valid 어노테이션을 사용하여 유효하지 않은 값들에 대한 검증과 커스텀 검증
- 검증(중복 이메일, 닉네임 여부 확인)을 진행 
- 넥네임의 경우 Pattern어노테이션을 활용해 정규식을 적용
- 정규식으로 부터 어긋날 경우 메시지 출력 
- 비밀번호의 경우 Lenght어노테이션을 활용해 길이제한
- 모든 검증을 마치고 회원가입이 완료 되었을 경우 로그인 상태로 유지시키고 메인페이지로 리다다이렉트

🌐**로그인**

- 닉네임 또는 이메일, 비밀번호를 입력 받아 동작, 유효하지 않을 경우 메시지를 출력  세션을 유지하는 방법으로 쿠키에 세션을 생성하기 위한 rememberMe라는 이름의 쿠키를 저장
- 세션이 만료되었을 때 rememberMe쿠키의 값을 이용하여 다시 세션 생성
- 로그인 유지 상태로 로그인을 하면 쿠키를 봤을 때, JSESSIONID와 remember-me항목이 생성

🔍**검색**

- 검색 키워드를 식당과 음식으로 나누어 적용하고 유저가 드롭박스 에서  선택한 키워드 타입과 입력한 키워드를 Controller Class 에서 get 방식으로 받아 동작
- Repository에 만들어둔 쿼리를 실행시켜 해당 값 을 db에서 가져오고 값을 addAttribute로 검색 결과창 으로 넘김 
addAttribute로 넘어온 검색 결과를 Thymeleaf 반복문 each로 출력

⭐**리뷰 및 별점**

- 리뷰 작성은 로그인한 상태에서만 동작, 로그인 상태가 아닐경우 로그인 페이지로 유도  리뷰 작성 폼에서는 식당에 관한 후기, 별점과 이미지들을 작성할 수 있다.
- 이미지의 경우 최대 3개 까지만 작성되도록 자바스크립트를 통해 구현  리뷰 삭제는 리뷰를 작성한 사용자가 로그인 했을 경우에만 리뷰 삭제 
버튼이 보임 식당별 별점은 쿼리문을 이용하여 적용

🧏‍♂️**역활**

   -**검색-**

- 다양한 방법을 보여주기 위해 api 연동 페이지 테이블과 다른 db데이터를 사용할 용도의 db엔티티 추가 제작 및 연동
- 클라이언트가 사용하는 장면을 상상하며 필요한 기술/과정 정리
- INDEX 페이지에서 TYPE과 KEYWORD 를 따로 나눠 get방식을 이용해 값을 던지는 코드 작성
- Controller 페이지에 넘어온 값을 받아 검색 결과창에 뿌려주는 코드 작성
- Open Api를 이용해 상세 페이지 작성 및 카카오 지도API를 통한 지도 연동



**왜 이 기술을 사용하게 되었는가?**

- 기존 스프링을 사용 했을때 보다 초반에 세팅(?)  시간을 상당히 줄이므로 (String boot Starter)개발 생산성이 훨씬 높아졌기 때문에 SpringBoot를 기반으로 프로젝트를 만들었다. 또한 JPA에도 마찬가지이다. 기존 세팅과 많은 코딩량을 상당량 Spring data Jpa 가 대신해줘 생산성이 증가 하였다. 또한 JSP 는 SpringBoot에서는 이제 공식적으로 권장하는 옵션도 아니고 thymeleaf는  JSP 와 유사하게 ${} 을 별도의 처리없이 이용 가능함,Model에 담긴 객체를 화면에서 JS로 처리하기 편리함,연산, 포맷과 관련된 기능을 추가적인 개발없이 지원과 같은 이유들 떄문에 thymeleaf를 사용 하였다.

**이 기술을 사용해서 어떤 문제를 해결할 수 있었는가**

- 복잡하고 시간이 많이 걸리는 엔터프라이즈 애플리케이션 제작에서 상당량 많은 시간을 단축 하였다. 또한 RDS 를 이용해 DB데이터 공유, 깃허브를 통한 코드 버전관리를 통해 어느부분의 코드가 어떻게 변했는지 등등 관리를 철저히 하여 결과를 바로바로 공유하여 신속한 진행을 할수 있었다.

**개선해야할 점**

- 검색 db테이블 제작시 실패 했던 mapping문제
- DB테이블을 따로 나누지 않은 중복 비효율성
- 아직 제작을 완료하지 못한 상세 페이지 마무리

**협업방식**

1. 버전관리
<img width="384" alt="ddd" src="https://user-images.githubusercontent.com/86937655/139570140-9d190a6c-3b96-4acb-b4b2-10eb2d35af1b.PNG">
 
3. 각자 맡은 기능 분석 및 ERD 생성 후 통합
<img width="384" alt="Happve-ERD" src="https://user-images.githubusercontent.com/86937655/139569831-c3170b75-18ff-4cdc-a550-68ce045cd26b.png">

4. 스케줄 정하기
<img width="384" alt="Capture" src="https://user-images.githubusercontent.com/86937655/139569573-49509f01-3993-43c2-94e0-5ad9006332d0.PNG">
5.개발 중간중간 문제에대한 팀원들과의 의논
<img width="384" alt="문제제시" src="https://user-images.githubusercontent.com/86937655/139569873-9ed86c7c-b620-4123-8af6-b14fdf71ec24.PNG">



**느낀점**

프로젝트 시작 전 나름 책도 사서 따로 공부하고 열심히 해서 자신만만한 상태였다. 하지만 역시 배우기만 하고 활용/경험이 없다보니 실전에서는 활용을 잘 하지 못하였다. 내가 알고 이해했던 정보들도 틀린 정보들도 많았고 잔 실수 도 너무 많았다. 대표적인 문제로 Table mapping 문제였다. 이 때 당시에 팀을 정하고, 요구사항,일정정리 등등 을 하고 이제 각자 할 기능들을 맡기 시작했는데 이때 당시에는 따로사서 풀더 JPA공부책에서 마침 검색파트를 하고있어서 자신 있게 검색을 하겠다고 했다.

역시 책에서 그냥 따라하는것과 실전에는 많은 차이가 있었다. 그냥 책에서 시키는 대로 했을뿐 왜 ManytoOne 인지 왜 이 애노테이션을 써야하는지에 대해 몰랐다. 시간을 흘러 데드라인은 점점 다가오고 처음에 겉멋을 잔뜩부려 최신기술인 querydsl을 사용하려 했다 실패 한뒤 책에서 다른 방안을 찾앗다. @Query, 쿼리 메서드 온갖 방법을 동원 했지만 나중에야 꺠달았다. 문제는 쿼리를 날려 데이터를 불러오는 방식이 아닌 table mapping 부터가 잘못됐던것!

그래서 팀원들과도 같이 상의를 했지만(다들 각자 맡은바 때문에 많이 바빴다) 결국에는 해결을 못했다.데드라인은 다가오고 그렇다고 그냥 앉아만 있을수는 없으니 일단은 동작이라도 시키고 성능은 나중에 개선하자!! 라고 마음먹고 테이블을 좀더 쉽게 구성한뒤 기술들의 장단점을 따지지않고 나한테 편한 native query를 썼던것 같다.

지금 프로젝트가 끝나서야 나에게 뭐가 부족한지 한눈에 보였다. 바로 '기초'였다.
이 프로젝트 이후로 내가 애매하게 알던 부분들을 확실하게 학습하고 이기술의 장단점을 비롯해 왜 이기술을 써야하는지에 대해 고민하고 또 고민하면서 코드를 개선해 나갔다.



